<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.text.Font?>

<BorderPane style="-fx-background-color: #f5f6fa;" prefWidth="700" prefHeight="550"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.emsi.ui.controllers.TagManagerController">
   
   <top>
      <VBox style="-fx-background-color: #9b59b6;">
         <padding>
            <Insets bottom="15.0" left="25.0" right="25.0" top="15.0" />
         </padding>
         <Label text="ðŸ·ï¸ Gestionnaire de Tags" textFill="WHITE">
            <font>
               <Font name="System Bold" size="18.0" />
            </font>
         </Label>
         <Label text="CrÃ©er et gÃ©rer les tags pour organiser les ressources" textFill="#e1bee7">
            <font>
               <Font size="12.0" />
            </font>
         </Label>
      </VBox>
   </top>
   
   <center>
      <VBox spacing="15.0">
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
         </padding>
         
         <!-- Formulaire de crÃ©ation de tag -->
         <VBox style="-fx-background-color: white; -fx-background-radius: 10;" spacing="10.0">
            <padding>
               <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
            </padding>
            <Label text="âž• CrÃ©er un nouveau tag" style="-fx-font-weight: bold;" />
            
            <HBox spacing="10.0">
               <TextField fx:id="tagNameField" promptText="Nom du tag (ex: MathÃ©matiques)" prefWidth="200" />
               <TextField fx:id="tagColorField" promptText="Couleur (ex: #3498db)" prefWidth="120" />
               <Region HBox.hgrow="ALWAYS" />
               <Button onAction="#handleCreateTag" text="âœ… CrÃ©er" 
                       style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-cursor: hand;" />
            </HBox>
            
            <TextField fx:id="tagDescriptionField" promptText="Description (optionnelle)" />
         </VBox>
         
         <Separator />
         
         <!-- Liste des tags existants -->
         <VBox spacing="10.0" VBox.vgrow="ALWAYS">
            <HBox spacing="10.0" alignment="CENTER_LEFT">
               <Label text="ðŸ“š Tags existants" style="-fx-font-weight: bold; -fx-font-size: 14px;" />
               <Label fx:id="tagCountLabel" text="(0 tags)" style="-fx-text-fill: #7f8c8d;" />
               <Region HBox.hgrow="ALWAYS" />
               <TextField fx:id="searchTagField" promptText="ðŸ” Rechercher..." prefWidth="200" />
               <Button onAction="#handleRefresh" text="ðŸ”„" 
                       style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-cursor: hand;" />
            </HBox>
            
            <ListView fx:id="tagsListView" VBox.vgrow="ALWAYS" prefHeight="250" />
         </VBox>
         
         <!-- Statistiques -->
         <HBox spacing="15.0">
            <VBox style="-fx-background-color: #3498db; -fx-background-radius: 10;" alignment="CENTER" 
                  prefWidth="150" prefHeight="80" HBox.hgrow="ALWAYS">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <Label fx:id="totalTagsLabel" text="0" textFill="WHITE">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Label>
               <Label text="Tags Totaux" textFill="WHITE" />
            </VBox>
            
            <VBox style="-fx-background-color: #e67e22; -fx-background-radius: 10;" alignment="CENTER" 
                  prefWidth="150" prefHeight="80" HBox.hgrow="ALWAYS">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <Label fx:id="mostUsedTagLabel" text="-" textFill="WHITE">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font>
               </Label>
               <Label text="Tag le + UtilisÃ©" textFill="WHITE" />
            </VBox>
            
            <VBox style="-fx-background-color: #95a5a6; -fx-background-radius: 10;" alignment="CENTER" 
                  prefWidth="150" prefHeight="80" HBox.hgrow="ALWAYS">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <Label fx:id="unusedTagsLabel" text="0" textFill="WHITE">
                  <font>
                     <Font name="System Bold" size="24.0" />
                  </font>
               </Label>
               <Label text="Tags Non UtilisÃ©s" textFill="WHITE" />
            </VBox>
         </HBox>
      </VBox>
   </center>
   
   <bottom>
      <HBox spacing="10.0" alignment="CENTER_RIGHT" style="-fx-background-color: #ecf0f1;">
         <padding>
            <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
         </padding>
         <Label fx:id="statusLabel" text="" style="-fx-text-fill: #27ae60;" />
         <Region HBox.hgrow="ALWAYS" />
         <Button fx:id="deleteBtn" onAction="#handleDeleteTag" text="ðŸ—‘ï¸ Supprimer" 
                 style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-cursor: hand;" disable="true" />
         <Button onAction="#handleClose" text="Fermer" 
                 style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-cursor: hand;" />
      </HBox>
   </bottom>
</BorderPane>
