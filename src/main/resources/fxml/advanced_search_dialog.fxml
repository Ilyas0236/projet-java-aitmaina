<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.text.Font?>

<!-- 
    Interface FXML: Recherche AvancÃ©e avec Filtres Multiples
    
    Cette interface permet:
    - Recherche par titre avec autocomplÃ©tion
    - Filtres par langue, difficultÃ©, date
    - Filtres par tags (multi-sÃ©lection)
    - Tri et pagination des rÃ©sultats
    
    @author Projet LOM - EMSI
-->
<BorderPane style="-fx-background-color: #f5f6fa;" prefWidth="900" prefHeight="650"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.emsi.ui.controllers.AdvancedSearchController">
   
   <top>
      <VBox style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2);">
         <padding>
            <Insets bottom="15.0" left="25.0" right="25.0" top="15.0" />
         </padding>
         <Label text="ðŸ” Recherche AvancÃ©e" textFill="WHITE">
            <font>
               <Font name="System Bold" size="20.0" />
            </font>
         </Label>
         <Label text="Trouvez des ressources avec des filtres combinÃ©s" textFill="#e8daef">
            <font>
               <Font size="12.0" />
            </font>
         </Label>
      </VBox>
   </top>
   
   <left>
      <!-- Panneau de filtres -->
      <VBox style="-fx-background-color: white;" prefWidth="280" spacing="15.0">
         <padding>
            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
         </padding>
         
         <Label text="âš™ï¸ Filtres" style="-fx-font-weight: bold; -fx-font-size: 14px;" />
         
         <Separator />
         
         <!-- Recherche textuelle -->
         <VBox spacing="5.0">
            <Label text="ðŸ“ Recherche par texte" style="-fx-font-weight: bold;" />
            <TextField fx:id="searchTextField" promptText="Titre, mots-clÃ©s..." />
            <CheckBox fx:id="exactMatchCheckBox" text="Correspondance exacte" />
         </VBox>
         
         <Separator />
         
         <!-- Filtre par langue -->
         <VBox spacing="5.0">
            <Label text="ðŸŒ Langue" style="-fx-font-weight: bold;" />
            <ComboBox fx:id="languageCombo" promptText="Toutes les langues" prefWidth="200" />
         </VBox>
         
         <!-- Filtre par difficultÃ© -->
         <VBox spacing="5.0">
            <Label text="ðŸŽ¯ DifficultÃ©" style="-fx-font-weight: bold;" />
            <HBox spacing="10.0" alignment="CENTER_LEFT">
               <Label text="Min:" />
               <Slider fx:id="difficultyMinSlider" min="1" max="5" value="1" showTickLabels="true" showTickMarks="true" majorTickUnit="1" minorTickCount="0" snapToTicks="true" prefWidth="80" />
               <Label text="Max:" />
               <Slider fx:id="difficultyMaxSlider" min="1" max="5" value="5" showTickLabels="true" showTickMarks="true" majorTickUnit="1" minorTickCount="0" snapToTicks="true" prefWidth="80" />
            </HBox>
         </VBox>
         
         <Separator />
         
         <!-- Filtre par tags -->
         <VBox spacing="5.0">
            <Label text="ðŸ·ï¸ Tags" style="-fx-font-weight: bold;" />
            <ListView fx:id="tagsFilterList" prefHeight="100" />
         </VBox>
         
         <Separator />
         
         <!-- Options de tri -->
         <VBox spacing="5.0">
            <Label text="ðŸ“Š Trier par" style="-fx-font-weight: bold;" />
            <ComboBox fx:id="sortByCombo" promptText="Date de crÃ©ation" prefWidth="200">
            </ComboBox>
            <CheckBox fx:id="descendingCheckBox" text="Ordre dÃ©croissant" selected="true" />
         </VBox>
         
         <Region VBox.vgrow="ALWAYS" />
         
         <!-- Boutons d'action -->
         <HBox spacing="10.0" alignment="CENTER">
            <Button onAction="#handleClearFilters" text="ðŸ—‘ï¸ Effacer" 
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-cursor: hand;" />
            <Button onAction="#handleSearch" text="ðŸ” Rechercher" prefWidth="120"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-cursor: hand;" />
         </HBox>
      </VBox>
   </left>
   
   <center>
      <VBox spacing="10.0">
         <padding>
            <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
         </padding>
         
         <!-- Barre d'information -->
         <HBox spacing="10.0" alignment="CENTER_LEFT">
            <Label fx:id="resultsCountLabel" text="0 rÃ©sultats" style="-fx-font-weight: bold;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="searchTimeLabel" text="" style="-fx-text-fill: #7f8c8d;" />
         </HBox>
         
         <!-- Liste des rÃ©sultats -->
         <ListView fx:id="resultsListView" VBox.vgrow="ALWAYS" />
         
         <!-- Pagination -->
         <HBox spacing="10.0" alignment="CENTER">
            <Button fx:id="prevPageBtn" onAction="#handlePreviousPage" text="â—€ PrÃ©cÃ©dent" 
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-cursor: hand;" disable="true" />
            <Label fx:id="pageInfoLabel" text="Page 1 / 1" />
            <Button fx:id="nextPageBtn" onAction="#handleNextPage" text="Suivant â–¶" 
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-cursor: hand;" disable="true" />
         </HBox>
      </VBox>
   </center>
   
   <bottom>
      <HBox spacing="10.0" alignment="CENTER_RIGHT" style="-fx-background-color: #ecf0f1;">
         <padding>
            <Insets bottom="12.0" left="20.0" right="20.0" top="12.0" />
         </padding>
         <Label fx:id="statusLabel" text="" />
         <Region HBox.hgrow="ALWAYS" />
         <Button fx:id="viewDetailBtn" onAction="#handleViewDetail" text="ðŸ‘ï¸ Voir DÃ©tails" 
                 style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-cursor: hand;" disable="true" />
         <Button fx:id="addFavoriteBtn" onAction="#handleAddFavorite" text="â­ Favoris" 
                 style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-cursor: hand;" disable="true" />
         <Button onAction="#handleClose" text="Fermer" 
                 style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-cursor: hand;" />
      </HBox>
   </bottom>
</BorderPane>
